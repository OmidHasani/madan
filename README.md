# ๐ค PDF Chatbot - ุณุณุชู ููุดููุฏ ูพุงุณุฎฺฏู ุจู ูุณุชูุฏุงุช

ฺฉ ุณุณุชู ฺุชโุจุงุช ูพุดุฑูุชู ู ุญุฑููโุง ุจุฑุง ูพุงุณุฎฺฏู ุจู ุณูุงูุงุช ุจุฑ ุงุณุงุณ ูุณุชูุฏุงุช PDF ุจุง ุงุณุชูุงุฏู ุงุฒ ุชฺฉููููฺ RAG (Retrieval-Augmented Generation) ู OpenAI GPT-4.

## โจ ูฺฺฏโูุง ุงุตู

- ๐ **ูพุฑุฏุงุฒุด ูพุดุฑูุชู PDF**: ุงุณุชุฎุฑุงุฌ ูุชู ุจุง ุฏูุช ุจุงูุง ุงุฒ ูุงูโูุง PDF ุญุช ุจุง ุตูุญุงุช ุจุณุงุฑ ุฒุงุฏ
- ๐ **ุฌุณุชุฌู ูุนูุง**: ุงุณุชูุงุฏู ุงุฒ Embeddings ุจุฑุง ุงูุชู ุฏููโุชุฑู ุจุฎุดโูุง ูุฑุชุจุท
- ๐ง **RAG Engine**: ุชุฑฺฉุจ ุฌุณุชุฌู ููุดููุฏ ุจุง ูุฏุฑุช ุชููุฏ ูุชู GPT-4
- ๐พ **Vector Database**: ุฐุฎุฑูโุณุงุฒ ฺฉุงุฑุขูุฏ ุจุง ChromaDB
- ๐จ **ุฑุงุจุท ฺฉุงุฑุจุฑ ุฒุจุง**: ุทุฑุงุญ ูุฏุฑู ู ฺฉุงุฑุจุฑูพุณูุฏ ุจุง ูพุดุชุจุงู ุงุฒ ุฒุจุงู ูุงุฑุณ
- ๐ **Chunking ููุดููุฏ**: ุชูุณูโุจูุฏ ูุชู ุจุง Overlap ุจุฑุง ุญูุธ context
- ๐ **ุงูุชุงุฒุฏู ุงุทููุงู**: ููุงุด ูุฒุงู ุงุทููุงู ุจู ูพุงุณุฎโูุง
- ๐ **ููุงุด ููุงุจุน**: ุงุฑุฌุงุน ุจู ุตูุญุงุช ู ุจุฎุดโูุง ูุฑุชุจุท

## ๐๏ธ ูุนูุงุฑ ุณุณุชู

```
โโโโโโโโโโโโโโโโโโโ
โ   PDF Document  โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    PDF Processor            โ
โ  - PyMuPDF & pdfplumber     โ
โ  - Smart Chunking           โ
โ  - Text Cleaning            โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   OpenAI Embeddings         โ
โ  - text-embedding-3-small   โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Vector Store (ChromaDB)   โ
โ  - Persistent Storage       โ
โ  - Cosine Similarity        โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      RAG Engine             โ
โ  - Context Retrieval        โ
โ  - GPT-4 Generation         โ
โ  - Confidence Scoring       โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   FastAPI Backend           โ
โ  - RESTful API              โ
โ  - WebSocket Support        โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Web Interface             โ
โ  - Modern UI/UX             โ
โ  - Real-time Chat           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฆ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

- Python 3.8 ุง ุจุงูุงุชุฑ
- OpenAI API Key
- ูุงู PDF ูุณุชูุฏุงุช ุดูุง

### ูุฑุงุญู ูุตุจ

1. **ฺฉููู ฺฉุฑุฏู ุง ุฏุงูููุฏ ูพุฑูฺู**

```bash
cd your-project-directory
```

2. **ูุตุจ ฺฉุชุงุจุฎุงููโูุง ููุฑุฏ ูุงุฒ**

```bash
pip install -r requirements.txt
```

3. **ุชูุธู API Key**

ูุงู `.env` ุฑุง ูุฑุงุด ฺฉูุฏ ู ฺฉูุฏ API ุฎูุฏ ุฑุง ูุฑุงุฑ ุฏูุฏ:

```env
OPENAI_API_KEY=your_openai_api_key_here
```

4. **ูุฑุงุฑ ุฏุงุฏู ูุงู PDF**

ูุงู PDF ุฎูุฏ ุฑุง ุฏุฑ ุฏุงุฑฺฉุชูุฑ ูพุฑูฺู ุจุง ูุงู `shopmanual.pdf` ูุฑุงุฑ ุฏูุฏ (ุง ูุงู ุขู ุฑุง ุฏุฑ `.env` ุชุบุฑ ุฏูุฏ).

5. **ุฑุงูโุงูุฏุงุฒ ุงููู ูพุงฺฏุงู ุฏุงุฏู**

```bash
python initialize_db.py
```

ุงู ูุฑุญูู ููฺฉู ุงุณุช ุจุณุชู ุจู ุญุฌู PDF ฺูุฏ ุฏููู ุทูู ุจฺฉุดุฏ. ุฏุฑ ุงู ูุฑุญูู:
- ูุชู ุงุฒ PDF ุงุณุชุฎุฑุงุฌ ูโุดูุฏ
- ุจู Chunk ูุง ฺฉูฺฺฉุชุฑ ุชูุณู ูโุดูุฏ
- Embedding ูุง ุณุงุฎุชู ูโุดููุฏ
- ุฏุฑ Vector Database ุฐุฎุฑู ูโุดููุฏ

6. **ุงุฌุฑุง ุณุฑูุฑ**

```bash
python run.py
```

ุง ูโุชูุงูุฏ ูุณุชููุงู API ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
python api.py
```

7. **ุฏุณุชุฑุณ ุจู ุฑุงุจุท ฺฉุงุฑุจุฑ**

ูุฑูุฑฺฏุฑ ุฎูุฏ ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:

```
http://localhost:8000
```

## ๐ฏ ูุญูู ุงุณุชูุงุฏู

### ุงุณุชูุงุฏู ุงุฒ ุฑุงุจุท ูุจ

1. ูพุณ ุงุฒ ุจุงุฒ ฺฉุฑุฏู ุตูุญูุ ุฏฺฉูู "ุฑุงูโุงูุฏุงุฒ ุณุณุชู" ุฑุง ุจุฒูุฏ (ุฏุฑ ุตูุฑุช ฺฉู ูุจูุงู `initialize_db.py` ุฑุง ุงุฌุฑุง ูฺฉุฑุฏูโุงุฏ)
2. ููุชุธุฑ ุจูุงูุฏ ุชุง ุณุณุชู ุขูุงุฏู ุดูุฏ
3. ุณูุงู ุฎูุฏ ุฑุง ุฏุฑ ฺฉุงุฏุฑ ูุชู ุจููุณุฏ
4. Enter ุจุฒูุฏ ุง ุฏฺฉูู ุงุฑุณุงู ุฑุง ฺฉูฺฉ ฺฉูุฏ
5. ูพุงุณุฎ ููุฑุงู ุจุง ููุงุจุน ู ูุฒุงู ุงุทููุงู ููุงุด ุฏุงุฏู ูโุดูุฏ

### ุงุณุชูุงุฏู ุงุฒ API

ูุณุชูุฏุงุช ฺฉุงูู API ุฏุฑ ุขุฏุฑุณ ุฒุฑ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช:

```
http://localhost:8000/docs
```

#### ูุซุงู: ูพุฑุณุฏู ุณูุงู

```python
import requests

response = requests.post('http://localhost:8000/api/ask', json={
    "question": "ุณูุงู ุดูุง ุฏุฑ ุงูุฌุง",
    "top_k": 5,
    "use_reranking": True,
    "language": "persian"
})

result = response.json()
print(result['answer'])
```

#### ูุซุงู: ุฌุณุชุฌู ูุณุชูู

```python
response = requests.post('http://localhost:8000/api/search', params={
    "query": "ููุถูุน ููุฑุฏ ูุธุฑ",
    "top_k": 5
})

results = response.json()
```

## โ๏ธ ูพฺฉุฑุจูุฏ ูพุดุฑูุชู

ูุงู `.env` ุฑุง ูโุชูุงูุฏ ุจุฑุง ุชูุธูุงุช ุณูุงุฑุด ูุฑุงุด ฺฉูุฏ:

```env
# OpenAI Configuration
OPENAI_API_KEY=your_key_here
EMBEDDING_MODEL=text-embedding-3-small
CHAT_MODEL=gpt-4-turbo-preview

# Document Processing
PDF_FILE_PATH=shopmanual.pdf
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Retrieval Settings
TOP_K_RESULTS=5
SIMILARITY_THRESHOLD=0.7

# Vector Database
VECTOR_DB_PATH=vector_db
COLLECTION_NAME=shop_manual

# Server Settings
HOST=0.0.0.0
PORT=8000
```

### ุชูุถุญ ูพุงุฑุงูุชุฑูุง

- **CHUNK_SIZE**: ุงูุฏุงุฒู ูุฑ Chunk ุงุฒ ูุชู (ุชุนุฏุงุฏ ฺฉุงุฑุงฺฉุชุฑ)
- **CHUNK_OVERLAP**: ุชุนุฏุงุฏ ฺฉุงุฑุงฺฉุชุฑูุง ูุดุชุฑฺฉ ุจู Chunk ูุง ูุชูุงู
- **TOP_K_RESULTS**: ุชุนุฏุงุฏ ูุชุงุฌ ุฌุณุชุฌู ุจุฑุง ูุฑ ุณูุงู
- **SIMILARITY_THRESHOLD**: ุญุฏุงูู ุดุจุงูุช ุจุฑุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ฺฉ ูุชุฌู

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
pdf-chatbot/
โ
โโโ api.py                  # FastAPI backend
โโโ config.py               # ุชูุธูุงุช ู Configuration
โโโ pdf_processor.py        # ูพุฑุฏุงุฒุด ู ุงุณุชุฎุฑุงุฌ PDF
โโโ vector_store.py         # ูุฏุฑุช Vector Database
โโโ rag_engine.py           # ููุชูุฑ RAG
โโโ initialize_db.py        # ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ ุงููู
โโโ run.py                  # ุงุณฺฉุฑูพุช ุงุฌุฑุง ุงุตู
โ
โโโ requirements.txt        # ูุงุจุณุชฺฏโูุง Python
โโโ .env                    # ุชูุธูุงุช ูุญุท (ุดุงูู API Key)
โโโ .env.example            # ููููู ูุงู ุชูุธูุงุช
โโโ .gitignore             # ูุงูโูุง ูุงุฏุฏู ฺฏุฑูุชู ุดุฏู ุชูุณุท Git
โ
โโโ static/                 # ูุงูโูุง ุงุณุชุงุชฺฉ
โ   โโโ index.html         # ุฑุงุจุท ฺฉุงุฑุจุฑ ูุจ
โ
โโโ vector_db/             # ูพุงฺฏุงู ุฏุงุฏู Vector (ุณุงุฎุชู ูโุดูุฏ)
โ
โโโ shopmanual.pdf         # ูุงู PDF ูุณุชูุฏุงุช ุดูุง
โ
โโโ README.md              # ุงู ูุงู
```

## ๐ง ุนุจโุงุจ

### ุฎุทุง "OpenAI API key not found"

ูุทูุฆู ุดูุฏ ฺฉู ูุงู `.env` ูุฌูุฏ ุฏุงุฑุฏ ู ฺฉูุฏ API ุฏุฑ ุขู ุจู ุฏุฑุณุช ุชูุธู ุดุฏู ุงุณุช.

### ุฎุทุง "PDF file not found"

ูุทูุฆู ุดูุฏ ฺฉู ูุงู PDF ุฏุฑ ูุณุฑ ุตุญุญ ูุฑุงุฑ ุฏุงุฑุฏ ุง ูุณุฑ ุฑุง ุฏุฑ `.env` ุชูุธู ฺฉูุฏ.

### ูุดฺฉู ุฏุฑ ุงุณุชุฎุฑุงุฌ ูุชู ุงุฒ PDF

ุจุฑุฎ PDF ูุง ููฺฉู ุงุณุช ูุชู ูุงุจู ุงุณุชุฎุฑุงุฌ ูุฏุงุดุชู ุจุงุดูุฏ (ุชุตูุฑ ุจุงุดูุฏ). ุฏุฑ ุงู ุตูุฑุช ูุงุฒ ุจู OCR ุฏุงุฑุฏ.

### ุฎุทุง Memory ุฏุฑ ูพุฑุฏุงุฒุด PDF ูุง ุจุฒุฑฺฏ

ุงฺฏุฑ PDF ุดูุง ุจุณุงุฑ ุจุฒุฑฺฏ ุงุณุช:
- `CHUNK_SIZE` ุฑุง ฺฉุงูุด ุฏูุฏ
- ูพุฑุฏุงุฒุด ุฑุง ุจู ุตูุฑุช Batch ุงูุฌุงู ุฏูุฏ
- RAM ุณุณุชู ุฎูุฏ ุฑุง ุงูุฒุงุด ุฏูุฏ

### ูพุงุณุฎโูุง ูุงูุฑุชุจุท

- `CHUNK_SIZE` ู `CHUNK_OVERLAP` ุฑุง ุชูุธู ฺฉูุฏ
- `TOP_K_RESULTS` ุฑุง ุงูุฒุงุด ุฏูุฏ
- ูุฏู Embedding ุจูุชุฑ ุฑุง ุงูุชุญุงู ฺฉูุฏ

## ๐ ุจูููโุณุงุฒ ุนููฺฉุฑุฏ

### ุจุฑุง PDF ูุง ุจุฒุฑฺฏ (1000+ ุตูุญู)

```env
CHUNK_SIZE=800
CHUNK_OVERLAP=150
TOP_K_RESULTS=7
```

### ุจุฑุง ุฏูุช ุจุดุชุฑ

```env
CHUNK_SIZE=1500
CHUNK_OVERLAP=300
TOP_K_RESULTS=10
EMBEDDING_MODEL=text-embedding-3-large
```

### ุจุฑุง ุณุฑุนุช ุจุดุชุฑ

```env
CHUNK_SIZE=600
CHUNK_OVERLAP=100
TOP_K_RESULTS=3
CHAT_MODEL=gpt-3.5-turbo
```

## ๐ ูฺฺฏโูุง ุชฺฉูฺฉ

- **Multi-strategy PDF Extraction**: ุงุณุชูุงุฏู ุงุฒ PyMuPDF ู pdfplumber ุจู ุตูุฑุช ูุจุฑุฏ
- **Smart Chunking**: ุชูุณูโุจูุฏ ุจุง ุญูุธ context ู ูุนูุง
- **Vector Search**: ุฌุณุชุฌู ูุนูุง ุจุง ChromaDB
- **RAG Pipeline**: ุจุงุฒุงุจ context + ุชููุฏ ูพุงุณุฎ ุจุง GPT-4
- **Confidence Scoring**: ุงูุชุงุฒุฏู ุงุทููุงู ุจู ูพุงุณุฎโูุง
- **Source Attribution**: ุงุฑุฌุงุน ุจู ููุงุจุน ู ุตูุญุงุช
- **Async API**: API ุบุฑููุฒูุงู ุจุฑุง ุนููฺฉุฑุฏ ุจูุชุฑ
- **CORS Support**: ูพุดุชุจุงู ุงุฒ ุฏุฑุฎูุงุณุชโูุง Cross-origin

## ๐ ุงููุช

- **API Key**: ฺฉูุฏ API ุฑุง ูุฑฺฏุฒ ุฏุฑ ฺฉุฏ ูุฑุงุฑ ูุฏูุฏุ ููุท ุฏุฑ `.env`
- **Gitignore**: ูุงู `.env` ุฏุฑ `.gitignore` ูุฑุงุฑ ุฏุงุฑุฏ
- **Validation**: ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง ุจุง Pydantic
- **Error Handling**: ูุฏุฑุช ุฎุทุงูุง ุจุฏูู ููุงุด ุงุทูุงุนุงุช ุญุณุงุณ

## ๐ค ูุดุงุฑฺฉุช

ุจุฑุง ุจูุจูุฏ ุงู ูพุฑูฺู:
1. Fork ฺฉูุฏ
2. ุชุบุฑุงุช ุฎูุฏ ุฑุง ุงุนูุงู ฺฉูุฏ
3. ุชุณุช ฺฉูุฏ
4. Pull Request ุงุฑุณุงู ฺฉูุฏ

## ๐ ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุงุณูุณ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

## ๐ ุชุดฺฉุฑ

- OpenAI ุจุฑุง API ูุง ูุฏุฑุชููุฏ
- ChromaDB ุจุฑุง Vector Database
- FastAPI ุจุฑุง ูุฑููุฑฺฉ ุนุงู
- PyMuPDF ู pdfplumber ุจุฑุง ูพุฑุฏุงุฒุด PDF

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ุงุจุชุฏุง ุจุฎุด ุนุจโุงุจ ุฑุง ูุทุงูุนู ฺฉูุฏ
2. ูุงฺฏโูุง ุณุณุชู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ูุณุชูุฏุงุช API ุฑุง ูุทุงูุนู ฺฉูุฏ (`/docs`)
4. Issue ุงุฌุงุฏ ฺฉูุฏ

---

**ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุจุฑุง ูพุงุณุฎฺฏู ููุดููุฏ ุจู ูุณุชูุฏุงุช**



